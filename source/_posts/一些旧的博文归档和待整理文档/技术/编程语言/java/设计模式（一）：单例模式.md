# 设计模式（一）：单例模式.md

今天在imooc看了《模式的秘密---单例模式》，写一下自己的理解。

## 1. 什么是单例模式
在某些情景下，我们可能有必要限制某一个类实例只允许存在一个。当有人提出质疑时，得到了这样的回答：“这样可以节约内存”。而事实上更多的人则回答，这样会避免某些逻辑错误。拿最常用的计数器来说，我们可能需要一个单独的类对象来进行某些事件的统计，但该实例对象我们并不需要也不应该存在第二个。它会使已有的计数器变得混乱并且不准确。此时我们就需要一种方式来避免这些不必要的东西。这样就有了单例模式。

## 2. 如何使用单例模式
单例模式被分为两种：饿汉式单例模式与懒汉式单例模式。

懒汉式单例模式的主要思路是，将类的构造方法设为私有使得外部类无法调用，而后在类中自己定义一个本类的类对象，继而封装方法在外部类中调用。当然这里需要注意的是没有实例对象我们也无法调用类方法，因此需要将封装的方法变成静态，借由类名调用方法。
~~~java
public class Singleton() {
    private Singleton() {
    }

    private static Singleton instance = new Singleton();

    public static Singleton getSingleton(){
    return instance;
}
}
~~~

饿汉式设计模式的主要思路与上者有一些类似，不同的地方是，饿汉式设计模式并没有在类中直接获取自己的实例对象，而是先定义一个空的实例对象，在类方法里做了一次判断，如果实例对象并没有被创建（为null）则将其指向本类的引用。
~~~java
public class Singleton() {
    private Singleton() {
    }

    private static Singleton instance = null;

    public static Singleton getSingleton() {
        if(instance == null){
            instance = new Singleton();
        }
        return instance;
    }
}
~~~

## 3. 区别
单是看起来两者区别并不大，但事实上却非也。

饿汉式设计模式因为需要初始化类对象，所以在类文件载入的时候会更慢，而因为所有实例对象均指向同一对象，所以创建实例对象的时候更快。并且线程更安全。

懒汉式设计模则因为不需要初始化而在类文佳载入的时候更快，反之因为多了判断的则在创建实例对象的时候更慢。并且线程不安全。
