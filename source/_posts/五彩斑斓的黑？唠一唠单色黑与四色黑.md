---
title: äº”å½©æ–‘æ–“çš„é»‘ï¼Ÿå” ä¸€å” å•è‰²é»‘ä¸å››è‰²é»‘
date: 2024.06.18 21:43:11
tags:
  - JavaScript
  - Golang
  - QRCode
categories:
  - å¥½é¥¿ï¼Œæ—©çŸ¥é“ä¸å­¦ç¼–ç¨‹äº†
---

## å›½é™…æƒ¯ä¾‹ï¼Œå†™åœ¨å‰é¢ã€‚

æˆ‘è¿™æ¬¡ä¸€å®šè¦åœ¨ SEO ä¸ŠæŠŠæ ‡ç­¾æ‰“æ»¡ï¼æˆ‘ä¸å…è®¸ 2024 å¹´è¿˜æœ‰äººæœä¸åˆ°å¦‚ä½•ç”¨ä»£ç ç”Ÿæˆå•è‰²é»‘äºŒç»´ç ï¼

## ç”Ÿæˆä¸ªäºŒç»´ç ä¸æ˜¯æœ‰æ‰‹å°±è¡Œï¼Ÿ

ç”¨ä»£ç ç”ŸæˆäºŒç»´ç ä¸æ˜¯å•¥æ–°é²œäº‹å„¿ï¼Œæ®è¯´ä¸å°‘äººå…¥è¡Œå†™çš„ç¬¬ä¸€ä¸ªçœ‹å¾—è§æ‘¸å¾—ç€çš„ç¨‹åºå°±æ˜¯ç”Ÿæˆä¸€ä¸ªäºŒç»´ç ã€‚ä¸šåŠ¡åå°ä¹Ÿæœ‰ä¸ªç”ŸæˆäºŒç»´ç çš„åŠŸèƒ½ï¼Œè¿™äº›äºŒç»´ç æœ€åä¼šè¢«å°åˆ·ï¼Œæœ€ç»ˆå‘ˆç°åœ¨çº¸è´¨ä¹¦ä¸Šã€‚ç„¶é¹…å¿½ç„¶æœ‰ä¸€å¤©ä¸šåŠ¡æ–¹å°±æ‰¾è¿‡æ¥äº†ï¼Œè¯´å’±ç”Ÿæˆçš„äºŒç»´ç æ˜¯å››è‰²é»‘ï¼Œå°åˆ·æˆæœ¬é«˜ï¼Œä»–ä»¬åœ¨è¿›è¡Œå°åˆ·å‰éœ€è¦å…ˆæ‰‹åŠ¨å¤„ç†æˆå•è‰²é»‘ï¼Œé—®èƒ½ä¸èƒ½ä¸€æ­¥åˆ°ä½ä»åå°å¯¼å‡ºä¸ºå•è‰²é»‘äºŒç»´ç ã€‚

å’±ä»€ä¹ˆå¤§åœºé¢æ²¡è§è¿‡ï¼Œå½“åœºåœ¨é’‰é’‰ç¾¤é‡Œæ‰“å‡ºäº†å……æ»¡æ™ºæ…§çš„ä¸€å¥è¯ï¼š**å•¥æ˜¯å•è‰²é»‘ - -ï¼**

## å•è‰²é»‘ï¼Ÿå››è‰²é»‘ï¼Ÿ

å•è‰²é»‘ä¸å››è‰²é»‘å¾ˆå®¹æ˜“è®©äººè§‰å¾—è¿™æ˜¯ä¸€ä¸ªå°åˆ·è¡Œä¸šç‰¹æœ‰çš„æœ¯è¯­ï¼Œäº‹å®ä¸Šæˆ‘ä»¬å¯èƒ½æ—©å·²ç»æ¥è§¦è¿‡äº†ã€‚

æˆ‘ä»¬åœ¨ä¸­å­¦ï¼ˆå¯èƒ½æ˜¯å°å­¦ï¼Ÿï¼‰å°±å­¦è¿‡ä¸€ä¸ªæ¦‚å¿µå«åš`è‰²å…‰ä¸‰åŸè‰²`ï¼Œé€šè¿‡å°†çº¢ã€ç»¿ã€è“ä¸‰ç§é¢œè‰²çš„å…‰å åŠ ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å„ç§é¢œè‰²ï¼Œç”±äºä¸‰ç§é¢œè‰²æœ€ç»ˆå åŠ æˆäº†ç™½è‰²ï¼Œè¿™ç§è‰²å½©æ¨¡å‹ä¹Ÿè¢«ç§°ä¸ºåŠ è‰²æ³•ï¼Œç°å¦‚ä»Šè¢«å¹¿æ³›çš„åº”ç”¨åœ¨æ˜¾ç¤ºå™¨ã€æ‘„å½±ç­‰åœºæ™¯ï¼ˆç”±æ­¤å½¢æˆçš„è‰²å½©æ¨¡å¼è¢«ç§°ä¸º`RGB`è‰²å½©æ¨¡å¼ï¼‰ã€‚

è€Œåœ¨å°åˆ·ã€ç»˜ç”»ç­‰é¢†åŸŸä¹Ÿæœ‰æˆ‘ä»¬ç†ŸçŸ¥çš„`è‰²æ–™ä¸‰åŸè‰²`ï¼Œå®ƒé€šè¿‡å°†é’ã€å“çº¢ã€é»„ä¸‰ç§é¢œè‰²çš„é¢œæ–™å åŠ ï¼ŒåŒæ ·å¯ä»¥å¾—åˆ°å„ç§é¢œè‰²ã€‚

![è‰²å…‰ä¸‰åŸè‰²å’Œè‰²æ–™ä¸‰åŸè‰²](https://www.gameislearning.url.tw/pic/my/rgb_cmyk01.png)

ç†è®ºä¸Šï¼Œå½“é’ã€å“çº¢ã€é»„ä¸‰ç§é¢œæ–™çš„æµ“åº¦è¾¾åˆ°æœ€å¤§æ—¶ï¼Œå¾—åˆ°çš„é¢œè‰²æ˜¯é»‘è‰²ï¼Œç„¶è€Œå®é™…ç”Ÿäº§ä¸­çš„æ•ˆæœå´å·®å¼ºäººæ„ï¼Œä¸»è¦åŒ…å«å¦‚ä¸‹å‡ ä¸ªç¼ºç‚¹ï¼š

1. ä¸‰ç§é¢œè‰²å åŠ å½¢æˆçš„é»‘è‰²ä¸çº¯ï¼Œå‘ˆç°å‡ºä¸€ç§ç°è’™è’™çš„é»‘è‰²ï¼Œæ•ˆæœä¸å¥½ï¼›
2. é€šè¿‡ä¸‰ç§é¢œè‰²å åŠ å½¢æˆçš„é»‘è‰²æ›´è´¹æ²¹å¢¨ï¼Œå°åˆ·æˆæœ¬é«˜ï¼›
3. è¦å±‚å æ•´é½ä¸‰ç§åŸè‰²ï¼Œå¯¹å°åˆ·çš„ç²¾åº¦è¦æ±‚å¾ˆé«˜ï¼Œå¦åˆ™è¾¹ç¼˜ä¼šå‡ºç°æ˜æ˜¾çš„è‰²å·®ï¼›

å› è€Œä¹‹åçš„å°åˆ·è¡Œä¸šåœ¨`è‰²æ–™ä¸‰åŸè‰²`çš„åŸºç¡€ä¸Šè¿½åŠ äº†ç¬¬å››ç§`åŸè‰²`ï¼Œå³é»‘è‰²ã€‚è‡³æ­¤ï¼ŒåŸºäºé’(`C`yan)ã€å“çº¢(`M`agenta)ã€é»„(`Y`ellow)ã€é»‘(blac`K`)å››ç§åŸè‰²çš„å½©å°è‰²å½©æ¨¡å¼è¯ç”Ÿï¼Œä»å››ç§é¢œè‰²çš„è‹±æ–‡å•è¯ä¸­å„å–ä¸€ä¸ªå­—æ¯ï¼Œå¾—åˆ°äº†å®ƒçš„åå­—ï¼š`CMYK`è‰²å½©æ¨¡å¼ã€‚

**è¿™ä¹Ÿå°±èƒ½è§£é‡Šä¸ºä»€ä¹ˆå¦‚ä»Šçš„å½©è‰²æ‰“å°æœºå¢¨æ°´æ˜¯è¿™å››ç§é¢œè‰²äº†ï¼Œæ¯”å¦‚ ğŸ‘‰[å°ç±³å®¶çš„å–·å¢¨æ‰“å°æœºå¢¨æ°´](https://www.mi.com/shop/buy/detail?product_id=10779&cfrom=search)ï¼ˆçœŸä¸æ˜¯å¹¿å‘Šâ€¦â€¦**

`CMYK`è‰²å½©æ¨¡å¼é€šè¿‡ 4 ä¸ªç™¾åˆ†æ¯”æ¥æè¿°ä¸€ç§é¢œè‰²åœ¨å››åŸè‰²ä¸Šçš„æµ“åº¦ï¼Œå½“å››åŸè‰²ä¸­çš„é’ã€å“çº¢ã€é»„åŸè‰²åˆ†åˆ«ä¸º 0%ï¼Œè€Œé»‘è‰²ä¸º 100%æ—¶ï¼Œå½¢æˆçš„é»‘è‰²å°±è¢«æˆä¸ºå•è‰²é»‘ï¼Œå®ƒè¢«æè¿°ä¸º`CMYK(0% 0% 0% 100%)`ã€‚ï¼ˆäº‹å®ä¸Šå¯¹é»‘è‰²é€šé“çš„å€¼å€’ä¹Ÿä¸ä¸¥æ ¼è¦æ±‚ä¸º 100%ï¼Œäººçœ¼å¹¶ä¸èƒ½åˆ†è¾¨å‡ºé¥±å’Œåº¦ä¸Šçš„ç»†å¾®å·®å¼‚ï¼‰

å¦‚å‰æ‰€è¿°ï¼Œå®ƒåªéœ€è¦ä¸€å±‚æ²¹å¢¨ï¼Œä¸”å¯¹å°åˆ·çš„ç²¾åº¦è¦æ±‚ä¹Ÿæ²¡æœ‰é‚£ä¹ˆé«˜ï¼Œå› è€Œåœ¨**å½©è‰²å°åˆ·**ä¸­çš„å¤§é¢ç§¯é»‘è‰²é€šå¸¸ä¼šä¼˜å…ˆé€‰æ‹©å•è‰²é»‘ã€‚

## é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šæˆ‘ä»¬ç”Ÿæˆçš„æ˜¯ä¸ªå•¥ï¼Ÿ

é€šè¿‡å°†ç”Ÿæˆçš„äºŒç»´ç å¯¼å…¥ PhotoShop å¹¶æŸ¥çœ‹è‰²å½©æ¨¡å¼å‘ç°ï¼Œå®ƒè¢«è¯†åˆ«ä¸ºç´¢å¼•æ¨¡å¼ã€‚è¿™æ˜¯ä¸€ç§é¢œè‰²æ•°é‡ååˆ†æœ‰é™çš„è‰²å½©æ¨¡å¼ï¼Œé€šå¸¸è¢«åº”ç”¨äºç½‘é¡µå±•ç¤ºç­‰åœºæ™¯ã€‚å¾—ç›Šäºè‰²å½©æœ‰é™ï¼Œå…¶ä½“ç§¯ç›¸å¯¹è¾ƒå°ã€‚ä½†å½“æœ‰æ›´å¤šçš„è‰²å½©éœ€æ±‚æ—¶ï¼Œé€šå¸¸ä¼šé€‰æ‹©å°†ç´¢å¼•æ¨¡å¼è½¬æ¢ä¸º`RGB`æ¨¡å¼å¤„ç†ï¼Œç”±äºæˆ‘ä»¬åæ–‡æœ‰åœ¨é»‘ç™½äºŒç»´ç ä¸Šå¢åŠ å½©è‰²æ°´å°çš„éœ€æ±‚ï¼Œè¿™é‡Œå°†ä¸è¿‡å¤šçš„è®¨è®ºç´¢å¼•æ¨¡å¼ï¼Œè€Œæ˜¯ä»¥æ›´å¸¸è§çš„`RGB`æ¨¡å¼è¿›è¡Œæ›¿ä»£ã€‚

åœ¨ `RGB` è‰²å½©æ¨¡å¼ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ `RGB(0, 0, 0)` æ¥è¡¨ç¤ºé»‘è‰²ï¼ˆæœ‰æ—¶ä¹Ÿä¼šä½¿ç”¨åå…­è¿›åˆ¶çš„`#000000`æ¥è¡¨ç¤ºï¼Œæœ¬è´¨ä¸Šæ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼‰ï¼Œé‚£ä¹ˆå®ƒå’Œå•è‰²é»‘åˆ°åº•æœ‰ä»€ä¹ˆå·®å¼‚å‘¢ï¼Ÿ

æˆ‘ä»¬å¯ä»¥åœ¨ Wiki ä¸ŠæŸ¥è¯¢åˆ°ä¸‹è¿°çš„ RGB ä¸ CMYK è½¬æ¢å…¬å¼ï¼Œç„¶è€Œå¾ˆå¯æƒœï¼Œä¸€æ–¹é¢å¦‚æœä½ ä½¿ç”¨ä¸“ä¸šè½¯ä»¶å°è¯•å¤„ç†ä½ ä¼šå‘ç°è½¬æ¢ç»“æœæ€»æ˜¯å¯¹ä¸ä¸Šï¼Œè€Œå¦ä¸€æ–¹é¢åˆ™æ˜¯äº‹å®ä¸Š RGB è‰²å½©æ¨¡å¼èƒ½æè¿°çš„é¢œè‰²èŒƒå›´è¦è¿œå¤§äº CMYK è‰²å½©æ¨¡å¼ã€‚

![RGBä¸CMYKç›¸äº’è½¬æ¢](/images/wu-cai-ban-lan-de-hei-lao-yi-lao-dan-se-hei-yu-si-se-hei/convert-rbg-and-cmyk.png)

åœ¨ PhotoShop ä¸­æ‰“å¼€ä¸€ä¸ª `RGB(0, 0, 0)` å›¾ç‰‡ï¼Œå¸å–å…¶ä¸­é»‘è‰²çš„éƒ¨åˆ†å¹¶æŸ¥çœ‹ `CMYK` è‰²å½©æ¨¡å¼ä¸‹çš„è‰²å€¼ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°å¤šç§ä¸åŒçš„ç»“æœï¼Œäº‹å®ä¸Šè¿™äº›ç»“æœå‡æ˜¯å‚è€ƒ`ICC è‰²å½©æè¿°æ–‡ä»¶`ï¼ˆå›½é™…è‰²å½©å°åˆ·åä¼šè‰²å½©å·¥ä¸šæ ‡å‡†ï¼‰æ¥è¿›è¡Œè®¡ç®—çš„ï¼Œä½ å¯ä»¥åœ¨ [è¿™ä¸ªç½‘ç«™](https://www.colortell.com/rgb2cmyk) é€‰æ‹©ä¸åŒçš„æè¿°æ–‡ä»¶å°è¯•æ¢ç®—ï¼Œå¾—åˆ°çš„ç»“æœå‡æ˜¯ä¸åŒçš„ã€‚ç›®å‰è¡Œä¸šä¸­æ¯”è¾ƒå¸¸è§çš„æ˜¯ `Japan Color 2001 Coated`ã€‚

![æ‹¾è‰²å™¨](/images/wu-cai-ban-lan-de-hei-lao-yi-lao-dan-se-hei-yu-si-se-hei/Photoshop-select-color.png)

è¿™ç§ç”± 4 ä¸ªé€šé“å åŠ è€Œæˆçš„é»‘è‰²ï¼Œå°±æ˜¯å‰æ–‡æ‰€è¿°çš„å››è‰²é»‘äº†ï¼ˆå…¶å®æ— è®ºåˆ‡æ¢ä»€ä¹ˆ`ICC`è§„èŒƒæ–‡ä»¶ï¼Œ`RGB(0, 0, 0)` å¤§æ¦‚éƒ½æ˜¯ä¸ä¼šè¢«è½¬æ¢æˆå•è‰²é»‘çš„ï¼‰ã€‚

ä¸‹é¢æ˜¯åœ¨ Adobe Acrobat ä¸­æ‰“å¼€ä¸€ä¸ª `RGB(0, 0, 0)` å¡«å……çš„å›¾ç‰‡å¹¶æŸ¥çœ‹å…¶ 4 ä¸ªé€šé“çš„é¢œè‰²ä¿¡æ¯çš„æˆªå›¾ï¼Œå¯ä»¥çœ‹åˆ°åœ¨å·²ç»å…³é—­é»‘è‰²é€šé“å’Œé»„è‰²é€šé“çš„æƒ…å†µä¸‹ä¾ç„¶èƒ½çœ‹åˆ°å…¶å®ƒé¢œè‰²çš„äºŒç»´ç ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªäºŒç»´ç çš„é»‘è‰²æ˜¯é€šè¿‡å¤šç§é¢œè‰²å åŠ å®ç°çš„ï¼Œä¹Ÿæ˜¯å››è‰²é»‘ä¸å•è‰²é»‘æœ€æ ¹æœ¬çš„å·®å¼‚ã€‚

![æŸ¥çœ‹åˆ†å±‚](/images/wu-cai-ban-lan-de-hei-lao-yi-lao-dan-se-hei-yu-si-se-hei/origin-qrcode-acrobat-preview.png)

## å·ä¸ªæ‡’ï¼šç°åº¦æ¨¡å¼

åœ¨äº†è§£äº†å°åˆ·ä¸è‰²å½©çš„åŸºæœ¬åŸç†åï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“ç†è§£æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ CMYK è‰²å½©æ¨¡å¼ï¼Œä¸è¿‡åœ¨è¿™ä¹‹å‰æˆ‘æƒ³å…ˆåä¸ªé¢˜ã€‚å¦‚æœå¯¹æ–‡ä»¶æ ¼å¼æ²¡æœ‰ç‰¹å®šè¦æ±‚åŒæ—¶ä¹Ÿä¸å‡†å¤‡åœ¨äºŒç»´ç ä¸Šå åŠ å…¶å®ƒå½©è‰²å†…å®¹ï¼Œå®é™…ä¸Šæœ‰ä¸€ä¸ªå·æ‡’çš„æ–¹æ³•â€”â€”ç°åº¦æ¨¡å¼ã€‚

ç°åº¦æ¨¡å¼é€šå¸¸ä½¿ç”¨ 8 ä½ç°åº¦é€šé“æ¥è¡¨ç¤ºï¼Œå®ƒå°† 0 è¡¨ç¤ºä¸ºé»‘è‰²ï¼Œ255 è¡¨ç¤ºä¸ºç™½è‰²ï¼Œè€Œ 127 åˆ™è¡¨ç¤ºä¸ºç°è‰²ã€‚

çœ‹èµ·æ¥å®ƒå’Œ CMYK è‰²å½©æ¨¡å¼ä¸€ç‚¹é¸Ÿå…³ç³»éƒ½æ²¡æœ‰ï¼Œä½†æ¢ä¸ªè§’åº¦æ€è€ƒï¼Œç°åº¦æ¨¡å¼åªæœ‰é»‘ç™½ç°ä¸‰ç§é¢œè‰²ä¸æ˜¯åˆšå¥½å¯¹åº”äº† CMYK è‰²å½©æ¨¡å¼ä¸­é»‘è‰²é€šé“çš„ä¸åŒé¥±å’Œåº¦å—ï¼Ÿ

ä¹Ÿæ­£æ˜¯å› ä¸ºå¦‚æ­¤ï¼Œäº‹å®ä¸Šæˆ‘ä»¬åªéœ€è¦å°†äºŒç»´ç è½¬æ¢ä¸ºç°åº¦æ¨¡å¼ï¼Œåœ¨ Adobe Acrobat ä¸­é€šè¿‡è¾“å‡ºé¢„è§ˆæŸ¥çœ‹åˆ†å±‚ä¿¡æ¯æ—¶å°±èƒ½å¤Ÿå‘ç°è¯¥å›¾ç‰‡çš„é»‘è‰²å‡ä½äº K é€šé“ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„å•è‰²é»‘ã€‚

![å…³é—­é»‘è‰²é€šé“å‰](/images/wu-cai-ban-lan-de-hei-lao-yi-lao-dan-se-hei-yu-si-se-hei/before-close-k.png)
![å…³é—­é»‘è‰²é€šé“å](/images/wu-cai-ban-lan-de-hei-lao-yi-lao-dan-se-hei-yu-si-se-hei/after-close-k.png)

## TIFF æ–‡ä»¶è§„èŒƒ

ä¸–ç•Œå¹¶ä¸æ€»æ˜¯å¦‚æˆ‘æ‰€æ„¿ï¼ŒäºŒç»´ç ä¸­é—´å¢åŠ å½©è‰²çš„ App Logo æ˜¯å¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œå¦‚æœæ•´å¼ å›¾ç‰‡ä½¿ç”¨ç°åº¦æ¨¡å¼ï¼Œåˆ™å½©è‰²çš„ Logo ä¹Ÿä¼šä¸¢å¤±è‰²å½©ä¿¡æ¯ã€‚

åœ¨å°åˆ·åœºæ™¯ç†åº”ä½¿ç”¨ CMYK è‰²å½©æ¨¡å¼ï¼Œä½†å´æœ‰ä¸€ä¸ªé—¨æ§›ï¼š**å¹¶éæ‰€æœ‰å›¾åƒæ–‡ä»¶æ ¼å¼éƒ½æ”¯æŒ CMYK è‰²å½©æ¨¡å¼**ã€‚

å¥½å·§ä¸å·§ä¸šåŠ¡æ–¹è¿˜çœŸå°±æœ‰è¿™ä¹ˆä¸ªè¯‰æ±‚ï¼Œä»–ä»¬å¸Œæœ›äº§å‡ºçš„äºŒç»´ç æ˜¯ tif æ ¼å¼çš„ï¼Œå› ä¸ºè¿™æ ·çš„æ–‡ä»¶æ›´æ–¹ä¾¿ç”¨äºåœ¨ Adobe InDesign ä¸­è¿›è¡Œæ’ç‰ˆå·¥ä½œã€‚

é€šè¿‡ TIFF æ–‡ä»¶æ ¼å¼å®ç°å¸¦å½©è‰² Logo çš„å•é»‘äºŒç»´ç æœ‰ä¸¤ç§æ€è·¯ï¼š

1. åœ¨åŒä¸€ä¸ª TIFF æ–‡ä»¶ä¸­ä¿ç•™ä¸¤ä¸ªå›¾åƒæ–‡ä»¶ï¼Œä¸€ä¸ªä½¿ç”¨ç°åº¦æ¨¡å¼ï¼Œä¸€ä¸ªä½¿ç”¨ App Logo åŸæœ‰çš„è‰²å½©æ¨¡å¼ï¼ˆå¦‚`RGB`æ¨¡å¼ï¼‰ï¼›
2. ä½¿ç”¨ CMYK è‰²å½©æ¨¡å¼é‡ç»˜äºŒç»´ç éƒ¨åˆ†ä¸ App Logo éƒ¨åˆ†ï¼›

### IFD

é€šè¿‡é˜…è¯» [TIFF 6.0](https://www.itu.int/itudoc/itu-t/com16/tiff-fx/docs/tiff6.pdf) è§„èŒƒæˆ‘ä»¬å¯ä»¥å¾—çŸ¥ä¸€ä¸ª TIFF æ–‡ä»¶ç”±å¤šä¸ª `IFD`ï¼ˆImage File Directoryï¼‰ç»„æˆï¼Œæ¯ä¸ª `IFD` éƒ½å¯ä»¥æœ‰è‡ªå·±çš„è‰²å½©æ¨¡å¼ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬å¯ä»¥å®ç°åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­åŒæ—¶åŒ…å«ç°åº¦ä¸`RGB`ç­‰å¤šä¸ªè‰²å½©æ¨¡å¼ã€‚

è¿™é‡Œæˆ‘ç›´æ¥å¼•ç”¨äº† [æŸ´æ ‘æ‰å¤§ä½¬çš„åšå®¢](https://chai2010.cn/post/misc/tiff-spec/) ä¸­çš„å†…å®¹ï¼Œæœ‰è¶£çš„æ˜¯ä¸€ä¸ª`IFD`é€šå¸¸æœ‰å¤šä¸ª `Tag` æ¥æè¿°å›¾åƒçš„å±æ€§ï¼Œè€Œå®šä¹‰è‰²å½©æ¨¡å¼çš„å´å¹¶ä¸æ˜¯æŸä¸ªç‰¹å®šçš„ `Tag`ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ç»„ `Tag` è”åˆå®šä¹‰çš„ã€‚

```
+------------------------------------------------------------------------------+
|                           TIFF Structure                                     |
|  IFH                                                                         |
| +------------------+                                                         |
| | II/MM            |                                                         |
| +------------------+                                                         |
| | 42               |      IFD                                                |
| +------------------+    +------------------+                                 |
| | Next IFD Address |--->| IFD Entry Num    |                                 |
| +------------------+    +------------------+                                 |
|                         | IFD Entry 1      |                                 |
|                         +------------------+                                 |
|                         | IFD Entry 2      |                                 |
|                         +------------------+                                 |
|                         |                  |      IFD                        |
|                         +------------------+    +------------------+         |
|     IFD Entry           | Next IFD Address |--->| IFD Entry Num    |         |
|    +---------+           +------------------+   +------------------+         |
|    | Tag     |                                  | IFD Entry 1      |         |
|    +---------+                                  +------------------+         |
|    | Type    |                                  | IFD Entry 2      |         |
|    +---------+                                  +------------------+         |
|    | Count   |                                  |                  |         |
|    +---------+                                  +------------------+         |
|    | Offset  |--->Value                         | Next IFD Address |--->NULL |
|    +---------+                                  +------------------+         |
|                                                                              |
+------------------------------------------------------------------------------+
```

ä¸è¿‡è€ƒè™‘åˆ°å¤šä¸ª IFD ç»„æˆçš„ TIFF æ–‡ä»¶ä½“ç§¯ä¼šæ¯”è¾ƒå¤§ï¼Œè¿™é‡Œå°±ä¸è€ƒè™‘è¿™ç§æ–¹æ¡ˆäº†ã€‚ï¼ˆ~~å…¶å®æ˜¯å› ä¸ºæˆ‘æ‰¾åˆ°çš„åº“åœ¨åˆå¹¶æ—¶å‡é€‰æ‹©äº†æŠŠå¤šä¸ªç´ æåˆå¹¶ä¸ºä¸€ä¸ªIFDâ€¦â€¦ä¸ç„¶æˆ‘è¿˜æŒºæƒ³åœ¨ç°åº¦æ¨¡å¼ä¸Šç›´æ¥å·ä¸ªæ‡’å ä¸€å±‚ logo çš„â€¦â€¦~~

### åŸºäº CMYK è‰²å½©æ¨¡å¼çš„å®ç°

åœ¨ TIFF 6.0 è§„èŒƒçš„æ‹“å±•ç« èŠ‚ä¸­å¯ä»¥çœ‹åˆ° TIFF æ–‡ä»¶æ ¼å¼æ˜ç¡®çš„æ”¯æŒ CMYK è‰²å½©æ¨¡å¼ï¼Œè€ŒåŸºäº CMYK è‰²å½©é‡ç»˜äºŒç»´ç åå€’æ˜¯æ²¡å•¥å¯è®²çš„ï¼Œè¿™é‡Œå°±ä¸å¤šèµ˜è¿°ï¼Œç›´æ¥ä¸Šä»£ç ã€‚

```go
package main

import (
	"bytes"
	"image"
	"image/color"
	"image/draw"
	"image/png"
	"os"

	"github.com/skip2/go-qrcode"
	"github.com/sunshineplan/tiff"
)

func main() {
	// ç”ŸæˆäºŒç»´ç 
	qrCode, err := qrcode.Encode("https://www.xiongyuchi.com/2024/06/18/wu-cai-ban-lan-de-hei-lao-yi-lao-dan-se-hei-yu-si-se-hei/", qrcode.Medium, 2048)
	if err != nil {
		panic(err)
	}

	// è½¬æ¢ä¸ºå›¾åƒå¯¹è±¡
	img, err := png.Decode(bytes.NewReader(qrCode))
	if err != nil {
		panic(err)
	}

	// æ‰“å¼€æ°´å°æ–‡ä»¶
	wmb_file, err := os.Open("../watermark.png")

	if err != nil {
		panic(err)
	}

	defer wmb_file.Close()

	// è§£ç æ°´å°æ–‡ä»¶
	wmb_img, err := png.Decode(wmb_file)

	if err != nil {
		panic(err)
	}

	// å†™å…¥æ°´å°
	offset := image.Pt((img.Bounds().Dx() - wmb_img.Bounds().Dx()) / 2, (img.Bounds().Dy() - wmb_img.Bounds().Dy()) / 2)
	b := img.Bounds()
	m := image.NewCMYK(b)

	draw.Draw(m, b, img, image.ZP, draw.Src)
	draw.Draw(m, wmb_img.Bounds().Add(offset), wmb_img, image.ZP, draw.Over)

  // case 1 å¯¼å‡º cmyk è‰²å€¼æ¨¡å¼çš„ TIFF æ–‡ä»¶
	SaveAsTiff(m, "result_cmyk.tif")

  // case 2 å¯¼å‡ºç°åº¦æ¨¡å¼çš„ TIFF æ–‡ä»¶
	grayImg := ConvertToGrayScale(m)
	SaveAsTiff(grayImg, "result_gray.tif")

}

// å°†å›¾åƒè½¬æ¢ä¸º CMYK è‰²å½©æ¨¡å¼
func ConvertToCMYK(img image.Image) *image.CMYK {
	bounds := img.Bounds()
	cmykImg := image.NewCMYK(bounds)

	for y := bounds.Min.Y; y < bounds.Max.Y; y++ {
		for x := bounds.Min.X; x < bounds.Max.X; x++ {
			originalColor := img.At(x, y)
			cmykColor := color.CMYKModel.Convert(originalColor)
			cmykImg.Set(x, y, cmykColor)
		}
	}

	return cmykImg
}

// å°†å›¾åƒè½¬æ¢ä¸ºç°åº¦æ¨¡å¼
func ConvertToGrayScale(img image.Image) *image.Gray {
	bounds := img.Bounds()
	grayImg := image.NewGray(bounds)

	for y := bounds.Min.Y; y < bounds.Max.Y; y++ {
		for x := bounds.Min.X; x < bounds.Max.X; x++ {
			originalColor := img.At(x, y)
			grayColor := color.GrayModel.Convert(originalColor)
			grayImg.Set(x, y, grayColor)
		}
	}

	return grayImg
}

// ä¿å­˜å›¾åƒä¸º TIFF æ–‡ä»¶
func SaveAsTiff(img image.Image, outputPath string) error {
	file, err := os.Create(outputPath)
	if err != nil {
		return err
	}
	defer file.Close()

	return tiff.Encode(file, img, &tiff.Options{Compression: tiff.LZW})
}

```

æœ€ç»ˆæ•ˆæœï¼š~~æˆ‘ç„¯ï¼å´©~~

![alt text](/images/wu-cai-ban-lan-de-hei-lao-yi-lao-dan-se-hei-yu-si-se-hei/last-before-close-k.png)

![alt text](/images/wu-cai-ban-lan-de-hei-lao-yi-lao-dan-se-hei-yu-si-se-hei/last-after-close-k.png)

## å‚è€ƒ

- [Wikipedia - åŸè‰²](https://zh.wikipedia.org/wiki/%E5%8E%9F%E8%89%B2#%E6%B6%88%E6%B8%9B%E5%9E%8B%E5%8E%9F%E8%89%B2)
- [Wikipedia - å°åˆ·å››åˆ†è‰²æ¨¡å¼](https://zh.wikipedia.org/wiki/%E5%8D%B0%E5%88%B7%E5%9B%9B%E5%88%86%E8%89%B2%E6%A8%A1%E5%BC%8F)
- [RGB è½¬æ¢ CMYK å·¥å…·](https://www.colortell.com/rgb2cmyk)
- [TIFF Revision 6.0](https://www.itu.int/itudoc/itu-t/com16/tiff-fx/docs/tiff6.pdf)
- [TIFF6.0 æ ¼å¼ç®€ä»‹](https://chai2010.cn/post/misc/tiff-spec/)
